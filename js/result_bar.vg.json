{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": "container",
  "height": 150,
  "autosize": {"type": "fit-x", "resize": true},

  "data": {
    "url": "https://raw.githubusercontent.com/Aiyaya78/FIT3179-DataVisualisation2/main/data/ge15_coalition_summary.csv",
    "format": {"type": "csv"}
  },

  "transform": [
    {
      "lookup": "coalition",
      "from": {
        "data": {
          "values": [
            {"coalition": "PH", "full": "Pakatan Harapan (PH)"},
            {"coalition": "PN", "full": "Perikatan Nasional (PN)"},
            {"coalition": "BN", "full": "Barisan Nasional (BN)"},
            {"coalition": "GPS", "full": "Gabungan Parti Sarawak (GPS)"},
            {"coalition": "GRS", "full": "Gabungan Rakyat Sabah (GRS)"},
            {"coalition": "WARISAN", "full": "Parti Warisan Sabah (WARISAN)"},
            {"coalition": "IND/OTH", "full": "Independent / Others"}
          ]
        },
        "key": "coalition",
        "fields": ["full"]
      }
    },
    {
    "lookup": "coalition",
    "from": {
      "data": {
        "values": [
          {"coalition": "PH", "english": "Alliance of Hope (PH)"},
          {"coalition": "PN", "english": "National Alliance (PN)"},
          {"coalition": "BN", "english": "National Front (BN)"},
          {"coalition": "GPS", "english": "Sarawak Parties Alliance (GPS)"},
          {"coalition": "GRS", "english": "Sabah People's Coalition (GRS)"},
          {"coalition": "WARISAN", "english": "Heritage Party (WARISAN)"},
          {"coalition": "IND/OTH", "english": "Independent / Others"}
        ]
      },
      "key": "coalition",
      "fields": ["english"]
    }
    },
    {"joinaggregate": [{"op": "sum", "field": "seats", "as": "totalSeats"}]},
    {"calculate": "datum.seats / datum.totalSeats * 100", "as": "pct"},
    {"calculate": "format(datum.pct, '.1f') + '%'", "as": "pctLabel"}
  ],

  "layer": [
    {
      "description": "Lollipop stick (thin bar)",
      "mark": {"type": "bar", "height": 3, "cornerRadiusEnd": 2},
      "encoding": {
        "x": {
          "field": "seats",
          "type": "quantitative",
          "title": "Number of Seats Won",
          "axis": {"grid": true},
          "scale": {"domainMin": 0}
        },
        "y": {
          "field": "coalition",
          "type": "nominal",
          "sort": ["PH", "PN", "BN", "GPS", "GRS", "IND/OTH", "WARISAN"],
          "title": null
        },
        "color": {
          "field": "coalition",
          "type": "nominal",
          "legend": null,
          "scale": {
            "domain": ["PH","PN","BN","GPS","GRS","WARISAN","IND/OTH"],
            "range": ["#bd0026","#1039ad","#15ace8","#ff4719","#fe9929","#fed976","#4ad7e8"]
          }
        }
      }
    },

    {
      "description": "Lollipop head (circle at end)",
      "mark": {"type": "point","filled":true, "size": 200, "opacity":1},
      "encoding": {
        "x": {"field": "seats", "type": "quantitative"},
        "y": {
          "field": "coalition",
          "type": "nominal",
          "sort": ["PH", "PN", "BN", "GPS", "GRS", "IND/OTH", "WARISAN"]
        },
        "color": {
          "field": "coalition",
          "type": "nominal",
          "legend": null,
          "scale": {
            "domain": ["PH","PN","BN","GPS","GRS","WARISAN","IND/OTH"],
            "range": ["#bd0026","#1039ad","#15ace8","#ff4719","#fe9929","#fed976","#4ad7e8"]
          }
        },
        "tooltip": [
            {"field": "full", "title": "Coalition"},
            {"field": "english", "title": "English Name"},
            {"field": "seats", "title": "Seats Won", "format":{}},
            {"field": "pctLabel", "title": "Seat Share"},
            {"field": "totalSeats", "title": "Total Parliamentary Seats"}
          ]
      }
    },
    {
      "mark": {
        "type": "rule",
        "stroke": "#000000",
        "strokeDash": [4, 4],
        "strokeWidth": 2
      },
      "encoding": {
        "x": {"datum": 112},
        "size": {"value": 2},
        "color": {"value": "#000"}
      }
      },
      {
        "mark": {"type": "text", "align": "center", "fontSize": 12, "dy": -10,"font": "Nunito",
      "fontWeight": 600},
        "encoding": {
          "x": {"datum": 112},
          "y": {"value": 0},
          "text": {"value": "Majority"}
        }
      }
    
  ],

  "config": {
    "view": {"stroke": null},
    "axis": {
      "titleFontSize": 12,
      "labelFontSize": 11,
      "titlePadding": 8,
      "domain": false,
      "tickSize": 3,
      "gridColor": "#e5e7eb",
      "labelFont": "Nunito",
      "labelFontWeight": 300,
      "titleFont": "Nunito",
      "titleFontWeight": 600
    },
    "legend": {
      "labelFont": "Nunito",
      "labelFontWeight": 500,
      "titleFont": "Nunito",
      "titleFontWeight": 600
    },
    "tooltipFormat": {},
    "facet": {}
  }
    

}

