/* Reset-ish */
:root {
  --bg: #0f172a;        /* slate-900 backdrop */
  --card: #ffffff;      /* white cards */
  --text: #0b1220;      /* dark text */
  --muted: #64748b;     /* slate-500 */
  --maxw: 1000px;
  --gap: 16px;
}

* { box-sizing: border-box; }
html, body { margin: 50; padding: 10; }
body { background: var(--bg); color: var(--text); font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; }

/* Page grid */
.page {
  max-width: var(--maxw);
  margin: 24px auto 64px;
  padding: 0 var(--gap);
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  grid-auto-rows: auto;
  gap: var(--gap);
  grid-template-areas:
    "title  title  title"
    "bar    bar    bar"
    "map    map    map"
    "d1     d2     d3"
    "bubble bubble d4"
    "heat   heat   d5"
    "small1 small2 small3";
}

/* Cards */
.card {
  background: var(--card);
  border-radius: 14px;
  padding: 14px 16px 10px;
  box-shadow: 0 6px 18px rgba(0,0,0,.08);
}

.card--title {
  grid-area: title;
  text-align: center;
  padding: 20px 18px;
}

.card--wide{ /* full width if you want to force it */
  grid-column: 1 / -1;
}

.card--wide-left {
  grid-column: 1 / span 2;
}

.card__title {
  font-size: 18px;
  margin: 0 0 8px;
}

.subtitle {
  margin: 4px 0 0;
  color: var(--muted);
}

/* Grid area mapping */
[style*="grid-area: bar"]   { grid-area: bar; }
[style*="grid-area: map"]   { grid-area: map; }
[style*="grid-area: d1"]    { grid-area: d1; }
[style*="grid-area: d2"]    { grid-area: d2; }
[style*="grid-area: d3"]    { grid-area: d3; }
[style*="grid-area: bubble"]{ grid-area: bubble; }
[style*="grid-area: d4"]    { grid-area: d4; }
[style*="grid-area: heat"]  { grid-area: heat; }
[style*="grid-area: d5"]    { grid-area: d5; }
[style*="grid-area: small1"]{ grid-area: small1; }
[style*="grid-area: small2"]{ grid-area: small2; }
[style*="grid-area: small3"]{ grid-area: small3; }

/* Visualization boxes */
.viz { width: 100%; }          
.viz--sm { min-height: 100px; }
.viz--md { min-height: 300px; }
.viz--tall { min-height: 500px; }

.caption {
  margin-top: 8px;
  color: var(--muted);
  font-size: 13px;
}

/* Vega embeds should fill their container */
.vega-embed, .vega-embed > * { width: 100% !important; }

/* Responsive */
@media (max-width: 1024px) {
  .page {
    grid-template-areas:
      "title  title  title"
      "bar    bar    bar"
      "map    map    map"
      "d1     d2     d3"
      "bubble bubble bubble"
      "d4     d4     d4"
      "heat   heat   heat"
      "d5     d5     d5"
      "small1 small2 small3";
  }
}

@media (max-width: 760px) {
  .page {
    grid-template-columns: 1fr;
    grid-template-areas:
      "title"
      "bar"
      "map"
      "d1"
      "d2"
      "d3"
      "bubble"
      "d4"
      "heat"
      "d5"
      "small1"
      "small2"
      "small3";
  }
  .viz--tall { min-height: 420px; }
}